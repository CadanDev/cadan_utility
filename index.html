<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<title>Lembrete: Olhe longe</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">

	<!-- Scripts JavaScript -->
	<script src="js/auth.js"></script>
	<script src="js/utils.js"></script>
	<script src="js/eyeRestTimer.js"></script>
	<script src="js/medicineReminders.js"></script>
	<script src="js/calendar.js"></script>
	<script src="js/app.js"></script>
</head>

<body class="bg-light">
	<!-- √Årea de Login/Usu√°rio -->
	<nav class="navbar navbar-light bg-white shadow-sm">
		<div class="container">
			<a class="navbar-brand" href="#">
				<i class="bi bi-clipboard-heart text-primary"></i> Sistema de Lembretes
			</a>
			<div id="userArea">
				<!-- Ser√° preenchido pelo JavaScript -->
			</div>
		</div>
	</nav>

	<div class="container py-5">
		<!-- √Årea de Login (mostrada quando n√£o logado) -->
		<div id="loginArea" class="row justify-content-center" style="display: none;">
			<div class="col-md-6">
				<div class="card shadow">
					<div class="card-body text-center">
						<h3><i class="bi bi-shield-lock"></i> Acesso Restrito</h3>
						<p class="mb-4">Voc√™ precisa estar logado para acessar o sistema de lembretes.</p>
						<a href="login.html" class="btn btn-primary me-2">
							<i class="bi bi-box-arrow-in-right"></i> Fazer Login
						</a>
						<a href="register.html" class="btn btn-outline-primary">
							<i class="bi bi-person-plus"></i> Cadastrar-se
						</a>
					</div>
				</div>
			</div>
		</div>

		<!-- √Årea Principal (mostrada quando logado) -->
		<div id="mainContent" class="row" style="display: none;">
			<div class="col-md-8 mx-auto">
				<div class="card shadow">
					<div class="card-body">
						<div class="d-flex justify-content-between align-items-center mb-3">
							<h3 class="card-title mb-0">
								<i class="bi bi-eye text-primary"></i> Descanso de olhos
							</h3>
							<div class="btn-group" role="group">
								<button id="testSoundBtn" class="btn btn-outline-secondary btn-sm" onclick="playSound()"
									title="Testar som da notifica√ß√£o">
									<i class="bi bi-volume-up"></i>
								</button>
								<button id="testNotificationBtn" class="btn btn-outline-info btn-sm" 
									onclick="sendNotification('üß™ Teste de Notifica√ß√£o', 'Esta √© uma notifica√ß√£o de teste do Windows!', {tag: 'test'})"
									title="Testar notifica√ß√£o do Windows">
									<i class="bi bi-bell"></i>
								</button>
							</div>
						</div>
						<p class="card-text mb-4">
							Voc√™ receber√° um alerta a cada 20 minutos para olhar longe por 20 segundos.
						</p>
						<div class="progress mb-4" style="height: 30px;">
							<div id="progressBar" class="progress-bar bg-primary" role="progressbar" style="width: 0%;"
								aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
							</div>
						</div>
						<button id="start20secBtn" class="btn btn-success btn-lg mb-3" onclick="start20SecTimer()">
							<i class="bi bi-play-circle"></i> Iniciar 20 segundos
						</button>
						<div id="status" class="fw-bold text-success mt-3"></div>

						<!-- Se√ß√£o de Lembretes de Rem√©dios -->
						<div class="medicine-section">
							<div class="d-flex justify-content-between align-items-center mb-3">
								<h2 class="h4 mb-0">
									<i class="bi bi-capsule text-success"></i> Lembretes de Rem√©dios
								</h2>
								<button class="btn btn-outline-warning btn-sm" onclick="showMedicineAlert('Vitamina D - Teste')"
									title="Testar alerta de medicamento">
									<i class="bi bi-bell"></i> Testar Alerta
								</button>
							</div>

							<div class="row mb-3">
								<div class="col-md-4">
									<div class="input-group">
										<span class="input-group-text"><i class="bi bi-clock"></i></span>
										<input type="time" id="medicineTime" class="form-control" placeholder="Hor√°rio">
									</div>
								</div>
								<div class="col-md-6">
									<div class="input-group">
										<span class="input-group-text"><i class="bi bi-prescription2"></i></span>
										<input type="text" id="medicineText" class="form-control"
											placeholder="Nome do rem√©dio/instru√ß√£o">
									</div>
								</div>
								<div class="col-md-2">
									<button class="btn btn-primary w-100" onclick="addMedicineReminder()">
										<i class="bi bi-plus-circle"></i> Adicionar
									</button>
								</div>
							</div>

							<div id="medicineList" class="mb-3">
								<!-- Lembretes ser√£o adicionados aqui -->
							</div>
						</div>

						<!-- Se√ß√£o do Calend√°rio -->
						<div class="row">
							<h2 class="h4 mb-3 col-12">
								<i class="bi bi-calendar3 text-info"></i> Calend√°rio de Eventos
							</h2>
							<div class="calendar-section col-md-6">

								<!-- Navega√ß√£o do Calend√°rio -->
								<div class="calendar-navigation d-flex justify-content-between align-items-center mb-3">
									<button class="btn btn-outline-primary" onclick="previousMonth()">
										<i class="bi bi-chevron-left"></i>
									</button>
									<h5 id="monthYear" class="mb-0"></h5>
									<button class="btn btn-outline-primary" onclick="nextMonth()">
										<i class="bi bi-chevron-right"></i>
									</button>
								</div>

								<div class="text-center mb-3">
									<button class="btn btn-sm btn-secondary" onclick="goToToday()">
										<i class="bi bi-house"></i> Hoje
									</button>
								</div>

								<!-- Grade do Calend√°rio -->
								<div id="calendar" class="calendar-grid mb-3"></div>
							</div>
							<!-- Coluna da Lista de Eventos -->
							<div class="col-md-6">
								<div class="d-flex justify-content-between align-items-center mb-3">
									<h4 class="h4 mb-0">
										<i class="bi bi-list-ul text-info"></i> Pr√≥ximos Eventos
									</h4>
									<button class="btn btn-success" onclick="openAddEventModal()">
										<i class="bi bi-plus-circle"></i> Adicionar
									</button>
								</div>

								<!-- Filtro de Data -->
								<div class="mb-3">
									<button id="clearFilterBtn" class="btn btn-sm btn-outline-secondary"
										onclick="clearDateFilter()" style="display: none;">
										<i class="bi bi-x-circle"></i> Limpar Filtro
									</button>
									<span id="filterInfo" class="text-muted small"></span>
								</div>

								<!-- Lista de Eventos Futuros -->
								<div id="upcomingEventsList" class="upcoming-events-list">
									<!-- Eventos ser√£o carregados aqui -->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div> <!-- Fim do mainContent -->

		<!-- Modal para Adicionar Evento -->
		<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">
							<i class="bi bi-calendar-plus"></i> Adicionar Novo Evento
						</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form onsubmit="event.preventDefault(); addEvent();">
							<div class="mb-3">
								<label for="eventDate" class="form-label">
									<i class="bi bi-calendar3"></i> Data do Evento
								</label>
								<input type="date" id="eventDate" class="form-control" required>
							</div>

							<div class="mb-3">
								<label for="eventTime" class="form-label">
									<i class="bi bi-clock"></i> Hor√°rio
								</label>
								<input type="time" id="eventTime" class="form-control" required>
							</div>

							<div class="mb-3">
								<label for="eventTitle" class="form-label">
									<i class="bi bi-bookmark"></i> T√≠tulo do Evento
								</label>
								<input type="text" id="eventTitle" class="form-control"
									placeholder="Digite o t√≠tulo do evento" required>
							</div>

							<div class="mb-3">
								<label for="eventDescription" class="form-label">
									<i class="bi bi-card-text"></i> Descri√ß√£o (opcional)
								</label>
								<textarea id="eventDescription" class="form-control" rows="3"
									placeholder="Digite uma descri√ß√£o para o evento"></textarea>
							</div>

							<div class="d-flex justify-content-end gap-2">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
									<i class="bi bi-x-circle"></i> Cancelar
								</button>
								<button type="submit" class="btn btn-primary">
									<i class="bi bi-calendar-plus"></i> Adicionar Evento
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>